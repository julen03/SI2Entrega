<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"	
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Find Rides</title>
</h:head>

<h:body>
    <h:form>
        <h3>Find Rides</h3>

        <h:outputLabel for="departCity" value="Depart City:" />
        <p:selectOneMenu id="departCity" value="#{findRidesBean.departCity}">
            <f:selectItem itemLabel="Select" itemValue="" />
            <f:selectItems value="#{findRidesBean.departCities}" />
            <p:ajax event="change" listener="#{findRidesBean.updateDestinationCities}" update="arrivalCity" />
        </p:selectOneMenu>

        <h:outputLabel for="arrivalCity" value="Arrival City:" />
        <p:selectOneMenu id="arrivalCity" value="#{findRidesBean.arrivalCity}">
            <f:selectItem itemLabel="Select" itemValue="" />
            <f:selectItems value="#{findRidesBean.destinationCities}" />
        </p:selectOneMenu>

        <h:outputLabel for="rideDate" value="Ride Date:" />
        <p:calendar id="rideDate" value="#{findRidesBean.rideDate}" />

        <p:commandButton value="Search" action="#{findRidesBean.queryRides}" update="ridesTable" />

        <h3>Rides:</h3>
        <p:dataTable id="ridesTable" value="#{findRidesBean.rides}" var="ride">
            <p:column headerText="Driver">
                <h:outputText value="#{ride.driver.name}" />
            </p:column>
            <p:column headerText="Seats">
                <h:outputText value="#{ride.nPlaces}" />
            </p:column>
            <p:column headerText="Price">
                <h:outputText value="#{ride.price}" />
            </p:column>
        </p:dataTable>
        <h:commandButton value="Close" action="Prueba.xhtml?faces-redirect=true" />
        
    </h:form>
</h:body>
</html>
